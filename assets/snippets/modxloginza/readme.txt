v0.4
Сниппет для регистрации и авторизации через сервис Loginza.ru

При регистрации пользователя, создается реальный пользователь MODx.
Сниппет не даст произвести повторную регистрацию если человек решил
зайти с другого OpenID. Данная возможность работает только в том
случае если провайдер OpenID возвращает поле email.

Отдача email разными сервисами
vkontakte  -
facebook +
yandex  -/+ (отдает только если пользователь разрешил)
google +
………

Это значит, если пользователь при первом входе зарегистрировался
например, через facebook то при следующем входе например, через
google ему будет отказано в регистрации и авторизации. При этом
будет выведено сообщение, что пользователь с этим email уже
существует. Следует заметить, что если сервис не отдает email
(например vkontake), то пользователь будет зарегистрирован,
однако в качестве email будет подставлен не существующий адрес.
Категорически не рекомендуется отсылать на эти email почту,
например, автоматически через скрипты.

Установка
---------
1.	Создайте папку /assets/snippets/modxloginza
2.      Создайте папку /assets/snippets/modxloginza/userimages
        и установите права для папки на запись. Скопируйте в неё
        файл default_user.jpg
3.	Скопируйте туда все файлы кроме snippet.php
4.	В панели менеджера создайте сниппет loginza
5.	Вставьте в новый сниппет содержимое файла sneppet.php

Использование
-------------
1.	ОБЯЗАТЕЛЬНО ЗАМЕНИТЕ ТЕКСТ В СТРОКЕ $secret сниппета loginza.
    Можно вставить любое случайное слово.
2.	В нужное место ваших шаблонов или чанков вставьте вызова
    сниппета. Например:
    [!loginza? &login_id=`[*id*]` &register_id=`[*id*]` &providers=`google,yandex,vkontakte,facebook` !]

Параметры
---------
&login_id  - ID странички куда существующие пользователь должен
             перейти после  авторизации. Разрешается [*id*]

&register_id – ID странички куда должен перейти новый пользователь
               после регистрации и авторизации. Разрешается [*id*]

&landing_url – ID странички де установлен сниппет, используется для
               callback логинзы. По умолчанию страничка вызовы сниппета.

&providers – список разрешенных OpenID провайдеров с логинзы (см. сайт логинзы)

&groups – список групп в который нужно включить нового пользователя.
          Соответственно работает этот параметр только для тех кто
          регистрируется. ВНИМАНИЕ: ГРУППА ДОЛЖНО БЫТЬ СУЩЕСТВУЮЩАЯ.
          Пример вызова: &groups=`gogogo`

&debug – включение/отключение режима отладки. Возможные параметры:
         1 – включено , 0-выключено. Если параметр вообще не указан,
         то считается, что отладка выключена.




Вывода личного кабинета
-----------------------
В кабинете, пользователь может изменить отображаемое имя, email, дату рождения,
сменить фотографию и некоторые другие парметры. Так же в кабинете есть возможность
удалить свой профиль с сайта.


Для вывода кабинета вызовите сниппет с параметром &type=`profile`
Например: [!loginza? &type=`profile`!]

Дополнительный параметр $profileTpl в котором можно указать имя чанка с
шаблоном кабинета. Если параметер не указан, выводится из файла profiletpl.php
Внимание: шаблон в этом файле явно не страдает своей красотой и является лишь
примером. Настоятельно рекомендую изменить его или сделать отдельный чанк.